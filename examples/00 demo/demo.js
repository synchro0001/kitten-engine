(()=>{"use strict";class e{withFields(e){let n=Object.keys(this).map((n=>n in e?e[n]:this[n]));return new this.constructor(...n)}}class n{static fromArray(e,n){let t=n||new a;for(let n=e.length-1;n>=0;--n)t=new c(e[n],t);return t}[Symbol.iterator](){return new s(this)}toArray(){return[...this]}atLeastLength(e){for(let n of this){if(e<=0)return!0;e--}return e<=0}hasLength(e){for(let n of this){if(e<=0)return!1;e--}return 0===e}countLength(){let e=0;for(let n of this)e++;return e}}function t(e,t){return n.fromArray(e,t)}class s{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof a)return{done:!0};{let{head:e,tail:n}=this.#e;return this.#e=n,{value:e,done:!1}}}}class a extends n{}class c extends n{constructor(e,n){super(),this.head=e,this.tail=n}}let o,i,l,r,d={},f={},u={x:0,y:0};function x(){const e=document.getElementById(o);i/l>=window.innerWidth/window.innerHeight?(e.width=window.innerWidth,r=window.innerWidth/i,e.height=l*r,e.style.top=(window.innerHeight-e.height)/2+"px",e.style.left="0px"):(e.height=window.innerHeight,r=window.innerHeight/l,e.width=i*r,e.style.top="0px",e.style.left=(window.innerWidth-e.width)/2+"px"),e.getContext("2d").imageSmoothingEnabled=!1}let h,w=[],m={},y=0;function g(e,n,t,s,a){function c(e,s){const a=e-y;if(a>16.6){h=a,t(s);const o=n(s);y=e,function(){for(const e in d)d[e]&=1;for(const e in f)f[e]&=1}(),requestAnimationFrame((e=>c(e,o)))}else requestAnimationFrame((e=>c(e,s)))}const i=document.getElementById(o);i.getContext("2d").imageSmoothingEnabled=!1,i.style.display="block",window.addEventListener("keydown",(e=>{d[e.code]=3})),window.addEventListener("keyup",(e=>{d[e.code]=4})),window.addEventListener("mousedown",(e=>{f[e.button]=3,u.x=e.clientX,u.y=e.clientY})),window.addEventListener("touchstart",(e=>{f[0]=3,u.x=e.touches[0].clientX,u.y=e.touches[0].clientY})),window.addEventListener("mouseup",(e=>{f[e.button]=4})),window.addEventListener("touchend",(e=>{f[0]=4})),window.addEventListener("mousemove",(e=>{u.x=e.clientX,u.y=e.clientY})),window.addEventListener("touchmove",(function(e){u.x=e.touches[0].clientX,u.y=e.touches[0].clientY}));const l=s.toArray().map(((e,n)=>new Promise((t=>{const s=new Image;s.onload=()=>{w[n]=s,t()},s.onerror=()=>{console.error(`Failed to load image ${n}`)},s.src=e})))),r=a.toArray().map((async(e,n)=>{if(e.endsWith(".js"))try{await async function(e,n){const t=await fetch(e),s=await t.text(),a=JSON.parse(s.replace(/\[,/g,"[null,").replace(/,,\]/g,",null]").replace(/,\s*(?=[,\]])/g,",null").replace(/([\[,]-?)(?=\.)/g,"$10").replace(/-\./g,"-0."),((e,n)=>null===n?void 0:n)),c=L(...a);m[n]=c,A[n]=1}(e,n)}catch(t){await async function(e,n){const t=await fetch(e),s=await t.text(),a=JSON.parse(s.replace(/\[,/g,"[null,").replace(/,,\]/g,",null]").replace(/,\s*(?=[,\]])/g,",null").replace(/([\[,]-?)(?=\.)/g,"$10").replace(/-\./g,"-0."),((e,n)=>null===n?void 0:n)),c=p(...a);m[n]=c,A[n]=0}(e,n)}else await async function(e,n){const t=await fetch(e),s=await t.arrayBuffer();m[n]=await v.decodeAudioData(s),A[n]=2}(e,n)}));Promise.all([Promise.all(l),Promise.all(r)]).then((()=>{const n=e();requestAnimationFrame((e=>c(e,n)))})).catch((e=>{console.error("Failed to start engine:",e)}))}const p=(e=1,n=.05,t=220,s=0,a=0,c=.1,o=0,i=1,l=0,r=0,d=0,f=0,u=0,x=0,h=0,w=0,m=0,y=1,g=0,p=0)=>{let v,L,b=2*Math.PI,A=l*=500*b/M**2,E=(0<h?1:-1)*b/4,S=t*=(1+2*n*Math.random()-n)*b/M,D=[],F=0,N=0,k=0,C=1,P=0,B=0,I=0;for(r*=500*b/M**3,h*=b/M,d*=b/M,f*=M,u=M*u|0,L=(s=99+M*s)+(g*=M)+(a*=M)+(c*=M)+(m*=M)|0;k<L;D[k++]=I)++B%(100*w|0)||(I=o?1<o?2<o?3<o?Math.sin((F%b)**3):Math.max(Math.min(Math.tan(F),1),-1):1-(2*F/b%2+2)%2:1-4*Math.abs(Math.round(F/b)-F/b):Math.sin(F),I=(u?1-p+p*Math.sin(2*Math.PI*k/u):1)*(0<I?1:-1)*Math.abs(I)**i*e*K*(k<s?k/s:k<s+g?1-(k-s)/g*(1-y):k<s+g+a?y:k<L-m?(L-k-m)/c*y:0),I=m?I/2+(m>k?0:(k<L-m?1:(L-k)/m)*D[k-m|0]/2):I),v=(t+=l+=r)*Math.sin(N*h-E),F+=v-v*x*(1-1e9*(Math.sin(k)+1)%2),N+=v-v*x*(1-1e9*(Math.sin(k)**2+1)%2),C&&++C>f&&(t+=d,S+=d,C=0),!u||++P%u||(t=S,l=A,C=C||1);return D},K=.3,M=44100,v=new(window.AudioContext||webkitAudioContext),L=(e,n,t,s=125)=>{let a,c,o,i,l,r,d,f,u,x,h,w,m,y,g,K=0,v=[],L=[],b=[],A=0,E=0,S=1,D={},F=M/s*60>>2;for(;S;A++)v=[S=f=h=m=0],t.map(((s,h)=>{for(d=n[s][A]||[0,0,0],S|=!!n[s][A],g=m+(n[s][0].length-2-!f)*F,y=h==t.length-1,c=2,i=m;c<d.length+y;f=++c){for(l=d[c],u=c==d.length+y-1&&y||x!=(d[0]||0)|l,o=0;o<F&&f;o++>F-99&&u?w+=(w<1)/99:0)r=(1-w)*v[K++]/2||0,L[i]=(L[i]||0)-r*E+r,b[i]=(b[i++]||0)+r*E+r;l&&(w=l%1,E=d[1]||0,(l|=0)&&(v=D[[x=d[K=0]||0,l]]=D[[x,l]]||(a=[...e[x]],a[2]*=2**((l-12)/12),l>0?p(...a):[])))}m=g}));return[L,b]};let b,A=[];function E(e){return e.toString(16).toUpperCase()}function S(e,n){let t=F(n),s=(a=e,c=t,Math.trunc(function(e,n){return 0===n?0:e/n}(a,c)));var a,c;let o=function(e,n){return 0===n?0:e%n}(e,t);return function(e,n,t){for(;;){let s=e;if(n<=0)return t;e=s,n-=1,t+=s}}(n,s,"")+function(e,n,t){if(t<0)return"";if(n<0){let s=F(e)+n;return s<0?"":k(e,s,t)}return k(e,n,t)}(n,0,o)}function D(e,n,t){let s=n-F(e);return s<=0?e:S(s,t)+e}function F(e){if(""===e)return 0;const n=N(e);if(n){let e=0;for(const t of n)e++;return e}return e.match(/./gsu).length}function N(e){if(globalThis.Intl&&Intl.Segmenter)return b||=new Intl.Segmenter,b.segment(e)[Symbol.iterator]()}function k(e,n,t){if(t<=0||n>=e.length)return"";const s=N(e);if(s){for(;n-- >0;)s.next();let e="";for(;t-- >0;){const n=s.next().value;if(void 0===n)break;e+=n.segment}return e}return e.match(/./gsu).slice(n,n+t).join("")}new WeakMap,new DataView(new ArrayBuffer(8)),Math.pow(2,5),Symbol();const C=[" ","\t","\n","\v","\f","\r","Â…","\u2028","\u2029"].join("");function P(e){return Math.round(e)}new RegExp(`^[${C}]*`),new RegExp(`[${C}]*$`);class B extends e{constructor(e,n,t,s){super(),this.r=e,this.g=n,this.b=t,this.a=s}}function I(e){return function(e){return"#"+D(E(e.r),2,"0")+D(E(e.g),2,"0")+D(E(e.b),2,"0")}(e)+D(E((n=255*e.a)>=0?P(n):0-P(function(e){return-1*e}(n))),2,"0");var n}const R=new B(0,0,0,1),W=new B(197,47,33,1);class H extends e{constructor(e,n){super(),this.x=e,this.y=n}}function $(e,n){return new H(e.x+n.x,e.y+n.y)}function q(e,n){return new H(e.x-n.x,e.y-n.y)}function T(e){return e}class U extends e{}class V extends e{}class X extends e{}class Y extends e{}class j extends e{}class O extends e{}class J extends e{}class _ extends e{}class Q extends e{}class z extends e{}class G extends e{}class Z extends e{}class ee extends e{}class ne extends e{}class te extends e{}class se extends e{}class ae extends e{}class ce extends e{}class oe extends e{}class ie extends e{}class le extends e{}class re extends e{}class de extends e{}class fe extends e{}class ue extends e{}class xe extends e{}class he extends e{}class we extends e{}class me extends e{}class ye extends e{}class ge extends e{}class pe extends e{}class Ke extends e{}class Me extends e{}class ve extends e{}class Le extends e{}class be extends e{}class Ae extends e{}class Ee extends e{}class Se extends e{}class De extends e{}class Fe extends e{}class Ne extends e{}class ke extends e{}class Ce extends e{}class Pe extends e{}class Be extends e{}class Ie extends e{}class Re extends e{}class We extends e{}class He extends e{}class $e extends e{}class qe extends e{}class Te extends e{}class Ue extends e{}class Ve extends e{}class Xe extends e{}class Ye extends e{}class je extends e{}class Oe extends e{}class Je extends e{}class _e extends e{}class Qe extends e{}class ze extends e{}class Ge extends e{}class Ze extends e{}class en extends e{}class nn extends e{}class tn extends e{}class sn extends e{}class an extends e{}class cn extends e{}class on extends e{}class ln extends e{}class rn extends e{}class dn extends e{}class fn extends e{}class un extends e{}class xn extends e{}class hn extends e{}class wn extends e{}class mn extends e{}class yn extends e{}class gn extends e{}class pn extends e{}class Kn extends e{}class Mn extends e{}class vn extends e{}class Ln extends e{}class bn extends e{}class An extends e{}class En extends e{}class Sn extends e{}class Dn extends e{}class Fn extends e{}class Nn extends e{}class kn extends e{}class Cn extends e{}class Pn extends e{}class Bn extends e{}class In extends e{}class Rn extends e{}class Wn extends e{}class Hn extends e{}class $n extends e{}class qn extends e{}class Tn extends e{}class Un extends e{}class Vn extends e{}function Xn(e){return e instanceof U?function(){for(const e in d)if(1&d[e])return!0;return!1}():function(e){return!!(1&d[e])}((n=e)instanceof U?"":n instanceof V?"KeyA":n instanceof X?"KeyB":n instanceof Y?"KeyC":n instanceof j?"KeyD":n instanceof O?"KeyE":n instanceof J?"KeyF":n instanceof _?"KeyG":n instanceof Q?"KeyH":n instanceof z?"KeyI":n instanceof G?"KeyJ":n instanceof Z?"KeyK":n instanceof ee?"KeyL":n instanceof ne?"KeyM":n instanceof te?"KeyN":n instanceof se?"KeyO":n instanceof ae?"KeyP":n instanceof ce?"KeyQ":n instanceof oe?"KeyR":n instanceof ie?"KeyS":n instanceof le?"KeyT":n instanceof re?"KeyU":n instanceof de?"KeyV":n instanceof fe?"KeyW":n instanceof ue?"KeyX":n instanceof xe?"KeyY":n instanceof he?"KeyZ":n instanceof we?"Space":n instanceof ye?"ArrowUp":n instanceof pe?"ArrowDown":n instanceof me?"ArrowLeft":n instanceof ge?"ArrowRight":n instanceof Ke?"Backspace":n instanceof Me?"Tab":n instanceof ve?"Enter":n instanceof Le?"ShiftLeft":n instanceof be?"ShiftRight":n instanceof Ae?"ControlLeft":n instanceof Ee?"ControlRight":n instanceof Se?"AltLeft":n instanceof De?"AltRight":n instanceof Fe?"Pause":n instanceof Ne?"CapsLock":n instanceof ke?"Escape":n instanceof Ce?"PageUp":n instanceof Pe?"PageDown":n instanceof Be?"End":n instanceof Ie?"Home":n instanceof Re?"PrintScreen":n instanceof We?"Insert":n instanceof He?"Delete":n instanceof $e?"Digit0":n instanceof qe?"Digit1":n instanceof Te?"Digit2":n instanceof Ue?"Digit3":n instanceof Ve?"Digit4":n instanceof Xe?"Digit5":n instanceof Ye?"Digit6":n instanceof je?"Digit7":n instanceof Oe?"Digit8":n instanceof Je?"Digit9":n instanceof _e?"MetaLeft":n instanceof Qe?"MetaRight":n instanceof ze?"ContextMenu":n instanceof Ge?"Numpad0":n instanceof Ze?"Numpad1":n instanceof en?"Numpad2":n instanceof nn?"Numpad3":n instanceof tn?"Numpad4":n instanceof sn?"Numpad5":n instanceof an?"Numpad6":n instanceof cn?"Numpad7":n instanceof on?"Numpad8":n instanceof ln?"Numpad9":n instanceof rn?"NumpadMultiply":n instanceof dn?"NumpadAdd":n instanceof fn?"NumpadSubtract":n instanceof un?"NumpadDecimal":n instanceof xn?"NumpadDivide":n instanceof hn?"F1":n instanceof wn?"F2":n instanceof mn?"F3":n instanceof yn?"F4":n instanceof gn?"F5":n instanceof pn?"F6":n instanceof Kn?"F7":n instanceof Mn?"F8":n instanceof vn?"F9":n instanceof Ln?"F10":n instanceof bn?"F11":n instanceof An?"F12":n instanceof En?"NumLock":n instanceof Sn?"ScrollLock":n instanceof Dn?"AudioVolumeMute":n instanceof Fn?"AudioVolumeDown":n instanceof Nn?"AudioVolumeUp":n instanceof kn?"LaunchMediaPlayer":n instanceof Cn?"LaunchApplication1":n instanceof Pn?"LaunchApplication2":n instanceof Bn?"Semicolon":n instanceof In?"Equal":n instanceof Rn?"Comma":n instanceof Wn?"Minus":n instanceof Hn?"Period":n instanceof $n?"Slash":n instanceof qn?"Backquote":n instanceof Tn?"BracketLeft":n instanceof Un?"Backslash":n instanceof Vn?"BracketRight":"Quote");var n}class Yn extends e{constructor(e){super(),this.player_pos=e}}const jn=new H(80,80);!function(e,n,t,s,a,c,r,d){(function(e,n,t,s,a,c,r,d){document.body.style.margin="0",document.body.style.padding="0",document.body.style.overflow="hidden",document.documentElement.style.margin="0",document.documentElement.style.padding="0",document.documentElement.style.overflow="hidden",document.getElementById(s).style.position="absolute",o=s,i=a,l=c,x(),window.addEventListener("resize",(()=>x())),g(e,n,t,r,d)})(e,n,t,s,a,c,r,d)}((function(){return new Yn(new H(0,0))}),(function(e){let n=(()=>{let n=e.player_pos,t=(Xn(new fe)?e=>$(e,new H(0,5)):T)(n),s=(Xn(new ie)?e=>q(e,new H(0,5)):T)(t),a=(Xn(new j)?e=>$(e,new H(5,0)):T)(s);return(Xn(new V)?e=>q(e,new H(5,0)):T)(a)})();return new Yn(n)}),(function(e){let n=function(e,n){return function(e,n){return e.canvas.style.backgroundColor=n,i&&(document.body.style.backgroundColor=n),e}(e,I(n))}(function(){const e=document.getElementById(o),n=e.getContext("2d");return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.setTransform(1,0,0,-1,e.width/2,e.height/2),n.scale(r,r),n}(),R);var t,s,a,c;t=n,s=e.player_pos,a=jn,c=W,function(e,n,t,s,a,c){const o=n-s/2,i=t-a/2;e.fillStyle=c,e.fillRect(o,i,s,a)}(t,s.x,s.y,a.x,a.y,I(c))}),"canvas",1920,1080,t([]),t([]))})();